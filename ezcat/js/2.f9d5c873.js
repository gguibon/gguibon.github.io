(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"026b":function(e,t,a){"use strict";a("7a29")},"7a29":function(e,t,a){},"9b2d":function(e,t,a){"use strict";a("c19d")},ab55:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("div",{staticClass:"q-pa-md block"},[a("q-toolbar",{staticClass:"bg-primary text-white shadow-2"},[a("q-toolbar-title",[e._v("Conversation")])],1),a("q-stepper",{ref:"stepper",attrs:{color:"primary",animated:"","header-class":"text-bold"},scopedSlots:e._u([{key:"navigation",fn:function(){return[a("q-stepper-navigation",[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.step<2,expression:"step<2"}],attrs:{color:"primary",label:2===e.step?"Finish":"Continue",disable:!e.allTagged},on:{click:function(t){return e.$refs.stepper.next()}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:2===e.step,expression:"step === 2"}],attrs:{to:"/",color:"positive",label:2===e.step?"Finish":"Continue",disable:!e.convTagged},on:{click:function(t){return e.saveChanges()}}}),e.step>1?a("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:"Back"},on:{click:function(t){return e.$refs.stepper.previous()}}}):e._e()],1)]},proxy:!0}]),model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("q-step",{attrs:{name:1,title:"Label messages",icon:"label",done:e.step>1}},[a("q-virtual-scroll",{staticStyle:{"max-height":"50vh"},attrs:{items:e.chatData.messages,separator:""},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.item,s=t.index;return[a("Message",{key:s,attrs:{mode:o.author,data:o,parentUpdateMessage:e.updateMessage,index:s,modecolor:e.getColor(o)}})]}}])})],1),a("q-step",{attrs:{name:2,title:"Label the conversation",icon:"chat_bubble",done:e.step>2}},e._l(Object.entries(e.$store.getters.getConfig.chatLabels),(function(t){return a("ConversationLabel",{key:t[0],attrs:{chatData:e.chatData,labelInfo:t[1],labelName:t[0],parentUpdateConvLabel:e.updateConvLabel}})})),1)],1)],1)])},s=[],r=(a("ddb0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-item",[a("q-item-section",{staticClass:"gt-sm",attrs:{avatar:"",top:""}},[a("q-avatar",{attrs:{icon:e.modeicon[e.data.author],color:e.$props.modecolor,"text-color":"white"}})],1),a("q-item-section",{attrs:{top:""}},[a("q-item-label",{staticClass:"text-justify",attrs:{caption:""}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xs-12"},[a("span",{staticClass:"text-weight-bold text-capitalize",class:"text-"+e.$props.modecolor},[e._v(e._s(e.data.author))])]),a("div",{staticClass:"col-xs-12 text-body1 text-blue-grey-8"},[a("span",{staticStyle:{overflow:"auto",width:"99vw"}},[e._v(e._s(e.data.text))])]),a("div",{staticClass:"col-xs-12 xs"},[a("q-select",{directives:[{name:"show",rawName:"v-show",value:!("alert"==e.data.author),expression:"!(data.author=='alert')"}],staticStyle:{width:"100%"},attrs:{outlined:"",color:null!=e.label?e.$props.modecolor:"","label-color":null!=e.label?e.$props.modecolor:"",options:e.$store.getters.firstMsgLabel.item.values,label:e.toUpper(e.$store.getters.firstMsgLabel.key),"transition-show":"jump-up","transition-hide":"jump-up","options-cover":""},on:{input:function(t){return e.updateData()}},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"label",color:null!=e.label?e.$props.modecolor:""}})]},proxy:!0},{key:"selected-item",fn:function(t){return[a("q-chip",{directives:[{name:"show",rawName:"v-show",value:t.opt.length>0,expression:"scope.opt.length>0"}],staticClass:"q-ma-none truncate-chip-labels",attrs:{removable:"",dense:"",tabindex:t.tabindex,color:"grey-3","text-color":e.$props.modecolor},on:{remove:function(e){return t.removeAtIndex(t.index)}}},[e._v("\n                                "+e._s(t.opt)+"\n                            ")])]}}]),model:{value:e.label,callback:function(t){e.label=t},expression:"label"}})],1)])])],1),a("q-item-section",{staticClass:"gt-sm",attrs:{top:"",side:""}},[a("div",{staticClass:"text-grey-8 q-gutter-xs select-block"},[a("q-select",{directives:[{name:"show",rawName:"v-show",value:!("alert"==e.data.author),expression:"!(data.author=='alert')"}],staticClass:"select-block",attrs:{outlined:"",color:null!=e.label?e.$props.modecolor:"","label-color":null!=e.label?e.$props.modecolor:"",options:e.$store.getters.firstMsgLabel.item.values,label:e.toUpper(e.$store.getters.firstMsgLabel.key),"transition-show":"jump-up","transition-hide":"jump-up","options-cover":""},on:{input:function(t){return e.updateData()}},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"label",color:null!=e.label?e.$props.modecolor:""}})]},proxy:!0},{key:"selected-item",fn:function(t){return[a("q-chip",{directives:[{name:"show",rawName:"v-show",value:t.opt.length>0,expression:"scope.opt.length>0"}],staticClass:"q-ma-none truncate-chip-labels",attrs:{removable:"",dense:"",tabindex:t.tabindex,color:"grey-3","text-color":e.$props.modecolor},on:{remove:function(e){return t.removeAtIndex(t.index)}}},[e._v("\n                        "+e._s(t.opt)+"\n                    ")])]}}]),model:{value:e.label,callback:function(t){e.label=t},expression:"label"}},[a("q-tooltip",{staticStyle:{width:"50px"},attrs:{delay:200}},[e._v(e._s(e.$store.getters.firstMsgLabel.item.description))])],1)],1)])],1)}),l=[],n={name:"message",props:["mode","data","parentUpdateMessage","index","modecolor"],data(){return{lorem:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",label:this.$props.data.labels[this.$store.getters.firstMsgLabel.key],messageData:this.$props.data}},computed:{modeicon:function(){if(this.$store.getters.getAuthorsIcons.hasOwnProperty(this.$props.data.author))return this.$store.getters.getAuthorsIcons;var e={};return e[this.$props.data.author]="account_circle",e}},mounted(){},methods:{updateData(){this.messageData.labels[this.$store.getters.firstMsgLabel.key]=this.label,this.$props.parentUpdateMessage(this.$props.index,this.messageData)},toUpper(e){return e[0].toUpperCase()+e.substring(1)}}},i=n,c=(a("026b"),a("2877")),p=a("66e5"),u=a("4074"),d=a("cb32"),h=a("0170"),m=a("ddd8"),b=a("0016"),v=a("b047"),g=a("05c0"),f=a("eebe"),x=a.n(f),y=Object(c["a"])(i,r,l,!1,null,"71e02adb",null),$=y.exports;x()(y,"components",{QItem:p["a"],QItemSection:u["a"],QAvatar:d["a"],QItemLabel:h["a"],QSelect:m["a"],QIcon:b["a"],QChip:v["a"],QTooltip:g["a"]});var q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["listselect"==e.$props.labelInfo.type?a("div",[a("q-select",{staticStyle:{width:"100%",height:"25vh"},attrs:{clearable:"","options-cover":"",options:e.$props.labelInfo.values,label:e.$props.labelInfo.title,"transition-show":"jump-up","transition-hide":"jump-up",color:"positive",filled:""},on:{input:function(t){return e.setValue()}},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"label"}})]},proxy:!0}],null,!1,2456627676),model:{value:e.label,callback:function(t){e.label=t},expression:"label"}},[a("q-tooltip",{attrs:{delay:200}},[e._v(e._s(e.$props.labelInfo.description))])],1)],1):"radiobtn"==e.$props.labelInfo.type?a("div",[a("span",{staticClass:"text-blue-grey-8"},[e._v(e._s(e.$props.labelInfo.title))]),a("q-option-group",{staticStyle:{width:"100%",height:"12vh"},attrs:{options:e.$props.labelInfo.values,color:"positive",inline:""},on:{input:function(t){return e.setValue()}},model:{value:e.label,callback:function(t){e.label=t},expression:"label"}}),a("q-tooltip",{attrs:{delay:200}},[e._v(e._s(e.$props.labelInfo.description))])],1):"boolean"==e.$props.labelInfo.type?a("div",[a("span",{staticClass:"text-blue-grey-8"},[e._v(e._s(e.$props.labelInfo.title))]),a("q-toggle",{staticStyle:{width:"100%",height:"12vh"},attrs:{label:e.boolToText(e.label),"checked-icon":"check","unchecked-icon":"clear"},on:{input:function(t){return e.setValue()}},model:{value:e.label,callback:function(t){e.label=t},expression:"label"}}),a("q-tooltip",{attrs:{delay:200}},[e._v(e._s(e.$props.labelInfo.description))])],1):a("div",[a("q-banner",{staticClass:"bg-grey-3",scopedSlots:e._u([{key:"avatar",fn:function(){return[a("q-icon",{attrs:{name:"warning",color:"primary"}})]},proxy:!0},{key:"action",fn:function(){return[a("q-btn",{attrs:{flat:"",color:"primary",label:"Go to Settings",to:"/settings"}})]},proxy:!0}])},[e._v("\n            Settings for this conversation-level "+e._s(e.$props.labelName)+" label are ill-defined.\n            ")])],1)])},w=[],C={name:"",props:["chatData","labelInfo","labelName","parentUpdateConvLabel"],data(){return{label:null}},computed:{},mounted(){this.label=this.chatData[this.$props.labelName]},methods:{boolToText(e){return e?"yes":"no"},setValue(){this.$props.chatData[this.$props.labelName]=this.label,this.$props.parentUpdateConvLabel(this.$props.labelName,this.label)}}},_=C,k=a("9f0a"),S=a("9564"),I=a("54e1"),Q=a("9c40"),D=Object(c["a"])(_,q,w,!1,null,null,null),L=D.exports;x()(D,"components",{QSelect:m["a"],QIcon:b["a"],QTooltip:g["a"],QOptionGroup:k["a"],QToggle:S["a"],QBanner:I["a"],QBtn:Q["a"]});var T={name:"PageIndex",components:{Message:$,ConversationLabel:L},props:["chat","chatid"],computed:{allTagged(){for(var e of this.chatData.messages)if(null==e.labels[this.$store.getters.firstMsgLabel.key]&&"alert"!=e.author)return!1;return!0},emergencyToText(){return this.emergency?"yes":"no"}},data(){return{lorem:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",chatEmotion:this.$props.chat.emotion,visitorSentiment:this.$props.chat.hasOwnProperty("visitorSentiment")?this.$props.chat.visitorSentiment:null,emergency:this.$props.chat.hasOwnProperty("emergency")?this.$props.chat.emergency:null,step:1,chatData:this.$props.chat,convTagged:null,encounteredAuthors:[]}},mounted(){this.convTagged=this.isConvTagged()},methods:{updateMessage(e,t){this.chatData.messages[e]=t},updateConvLabel(e,t){this.chatData[e]=t,this.convTagged=this.isConvTagged()},getColor(e){var t=this.$store.getters.getAuthorsColors;return t.hasOwnProperty(e.author)?t[e.author]:(this.encounteredAuthors.includes(e.author)||this.encounteredAuthors.push(e.author),this.$store.state.defaultAuthorColors[this.encounteredAuthors.indexOf(e.author)])},isConvTagged(){for(const[e,t]of Object.entries(this.$store.getters.getChatLabels))if(1==t.mandatory&&null==this.chatData[e])return!1;return!0},saveChanges(){this.chatData.done=!0,this.$store.dispatch("updateChat",this.chatData),this.$router.push("home"),this.$q.notify({message:"Don't forget to SAVE!!",color:"warning",position:"top-right"})}}},M=T,N=(a("9b2d"),a("9989")),j=a("65c6"),A=a("6ac5"),U=a("f531"),O=a("87fe"),E=a("a12b"),P=a("b19c"),V=Object(c["a"])(M,o,s,!1,null,"ba134ae0",null);t["default"]=V.exports;x()(V,"components",{QPage:N["a"],QToolbar:j["a"],QToolbarTitle:A["a"],QStepper:U["a"],QStep:O["a"],QVirtualScroll:E["a"],QStepperNavigation:P["a"],QBtn:Q["a"]})},c19d:function(e,t,a){}}]);