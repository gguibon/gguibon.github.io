(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{a0c0:function(t,e,o){},aeba:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",{staticClass:"flex flex-center"},[o("div",{staticClass:"q-pa-md block"},[o("q-toolbar",{staticClass:"bg-primary text-white shadow-2"},[o("q-toolbar-title",[t._v("Chats ")]),o("q-linear-progress",{staticStyle:{"max-width":"25vw"},attrs:{stripe:"",rounded:"",size:"20px",value:t.progress,color:"positive"}},[o("div",{staticClass:"absolute-full flex flex-center"},[o("q-badge",{attrs:{color:"white","text-color":"accent",label:t.progressLabel}})],1),o("q-tooltip",{attrs:{delay:200}},[t._v("Show you annotation progress")])],1),o("q-toggle",{staticClass:"q-ml-sm",attrs:{dense:"",color:"yellow",icon:"filter_list","keep-color":""},on:{input:function(e){t.todo=t.toggleTodoMode()}},model:{value:t.todo,callback:function(e){t.todo=e},expression:"todo"}},[o("q-tooltip",{attrs:{delay:200}},[t._v("Toggle to only show conversations that require annotation")])],1),o("q-btn",{staticClass:"q-ml-sm",attrs:{dense:"",icon:"edit","no-caps":"",color:"primary"},on:{click:function(e){return t.scrollToUnlabelled()}}},[o("q-tooltip",{attrs:{delay:200}},[t._v("Scroll to first conversation without annotation (please prefer the toggle method)")])],1),o("q-btn",{staticClass:"q-ml-sm",attrs:{dense:"",icon:"cloud_upload",color:"accent"},on:{click:function(e){t.uploadDial=!0}}},[o("q-tooltip",{attrs:{delay:200}},[t._v("Upload a JSON file to resume your work.")])],1),o("q-btn",{staticClass:"q-ml-sm",attrs:{dense:"",icon:"save",color:"secondary"},on:{click:function(e){return t.saveFile()}}},[o("q-tooltip",{attrs:{delay:200}},[t._v("Save your modification by downloading the current version of the JSON content.")])],1)],1),o("q-virtual-scroll",{ref:"virtualListRef",staticClass:"virtualscroll",attrs:{items:t.chatList},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.item,s=e.index;return[o("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:s,staticClass:"q-my-sm",attrs:{clickable:""},on:{click:function(e){return t.enterChat(a[1])}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",{attrs:{color:null==a[1].emotion?"grey":"positive","text-color":"white",icon:null==a[1].emotion?"":"done"}})],1),o("q-item-section",[o("q-item-label",[t._v(t._s(a[1].id))]),o("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v("Datetime: "),o("span",{staticClass:"text-bold"},[t._v(t._s(a[1].datetime))])]),o("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v("Real Duration: "),o("span",{staticClass:"text-bold"},[t._v(t._s(a[1].realDuration))])]),o("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v("Speaking Slots: "),o("span",{staticClass:"text-bold"},[t._v(t._s(a[1].speakingSlots.length))])])],1)],1)]}}])})],1),o("q-dialog",{attrs:{maximized:t.maximizedUploadToggle,"transition-show":"fade","transition-hide":"fade"},model:{value:t.uploadDial,callback:function(e){t.uploadDial=e},expression:"uploadDial"}},[o("q-card",{staticStyle:{"max-width":"100vw"}},[o("q-bar",[o("q-space"),o("q-btn",{attrs:{dense:"",flat:"",icon:"minimize",disable:!t.maximizedUploadToggle},on:{click:function(e){t.maximizedUploadToggle=!1}}}),o("q-btn",{attrs:{dense:"",flat:"",icon:"crop_square",disable:t.maximizedUploadToggle},on:{click:function(e){t.maximizedUploadToggle=!0}}}),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1),o("q-card-section",[o("div",{staticClass:"text-h6 text-blue-grey-8"},[t._v("Select a JSON file to continue tagging")])]),o("q-card-section",[o("q-file",{staticStyle:{"max-width":"200px"},attrs:{id:"filepicker","bottom-slots":"",label:"Load JSON",accept:".json, text/json",counter:"","use-chips":"",outlined:""},on:{input:function(e){return t.loadFile()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"cloud_upload"},on:{click:function(t){t.stopPropagation()}}})]},proxy:!0},{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(e){e.stopPropagation(),t.upload=null}}})]},proxy:!0}]),model:{value:t.upload,callback:function(e){t.upload=e},expression:"upload"}})],1)],1)],1)],1)},s=[],i=(o("4fad"),o("ddb0"),o("2b3d"),o("4360")),l={data(){return{upload:null,uploadDial:!1,maximizedUploadToggle:!1,todo:this.$store.getters.getTodoMode}},computed:{tagged(){var t=0;for(let[e,o]of Object.entries(this.$store.getters.getChats))null!=o.emotion&&t++;return t},progress(){var t=0;for(let[e,o]of Object.entries(this.$store.getters.getChats))null!=o.emotion&&t++;return t/Object.entries(this.$store.getters.getChats).length},progressLabel(){var t=0;for(let[e,o]of Object.entries(this.$store.getters.getChats))null!=o.emotion&&t++;return`${t} / ${Object.entries(this.$store.getters.getChats).length} ( ${Math.round(t/Object.entries(this.$store.getters.getChats).length*100)}%) `},chatList(){if(0==this.todo)return Object.entries(this.$store.getters.getChats);{let t={};for(let[e,o]of Object.entries(this.$store.getters.getChats))o.hasOwnProperty("emotion")&&null==o.emotion&&(t[e]=o);return Object.entries(t)}}},methods:{enterChat(t){this.$router.push({name:"chat",params:{chatid:t.id,chat:t}})},saveFile(){const t=JSON.stringify(this.$store.getters.getChats),e=new Blob([t],{type:"text/plain"}),o=document.createEvent("MouseEvents"),a=document.createElement("a");a.download="chats"+Date.now()+"_"+this.tagged+".json",a.href=window.URL.createObjectURL(e),a.dataset.downloadurl=["text/json",a.download,a.href].join(":"),o.initEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(o)},loadFile(){var t=new FileReader;t.onload=function(t){i["a"].dispatch("setChats",JSON.parse(t.target.result))},t.readAsText(this.upload),this.$q.notify({message:"data loaded",position:"top-right",color:"positive"}),this.uploadDial=!1},scrollToUnlabelled(){var t=0;for(const[e,o]of Object.entries(this.$store.getters.getChats)){if(null==o.emotion){this.$refs.virtualListRef.scrollTo(t);break}t++}},toggleTodoMode(){return this.$store.commit("toggle_todo"),this.$store.getters.getTodoMode}}},n=l,r=(o("c27f"),o("2877")),c=o("9989"),d=o("65c6"),u=o("6ac5"),p=o("6b1d"),g=o("58a81"),m=o("05c0"),h=o("9564"),f=o("9c40"),b=o("a12b"),v=o("66e5"),q=o("4074"),w=o("cb32"),x=o("0170"),C=o("24e8"),y=o("f09f"),_=o("d847"),k=o("2c91"),S=o("a370"),Q=o("7d53"),T=o("0016"),$=o("714f"),O=o("7f67"),j=o("eebe"),D=o.n(j),L=Object(r["a"])(n,a,s,!1,null,"48db8b04",null);e["default"]=L.exports;D()(L,"components",{QPage:c["a"],QToolbar:d["a"],QToolbarTitle:u["a"],QLinearProgress:p["a"],QBadge:g["a"],QTooltip:m["a"],QToggle:h["a"],QBtn:f["a"],QVirtualScroll:b["a"],QItem:v["a"],QItemSection:q["a"],QAvatar:w["a"],QItemLabel:x["a"],QDialog:C["a"],QCard:y["a"],QBar:_["a"],QSpace:k["a"],QCardSection:S["a"],QFile:Q["a"],QIcon:T["a"]}),D()(L,"directives",{Ripple:$["a"],ClosePopup:O["a"]})},c27f:function(t,e,o){"use strict";var a=o("a0c0"),s=o.n(a);s.a}}]);